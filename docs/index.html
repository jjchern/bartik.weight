<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Estimating Rotemberg Weights for a Bartik "Instrument" • bartik.weight</title>
<!-- jquery --><script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script><!-- Font Awesome icons --><link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">
<!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="jquery.sticky-kit.min.js"></script><script src="pkgdown.js"></script><!-- mathjax --><script src="https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-vignette">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">bartik.weight</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="/index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="reference/index.html">Reference</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/jjchern/bartik.weight">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9">
    

    
    
<div class="contents">
<!-- README.md is generated from README.Rmd. Please edit that file -->
<div id="about-bartik-weight" class="section level1">
<div class="page-header"><h1 class="hasAnchor">
<a href="#about-bartik-weight" class="anchor"></a>About <code>bartik.weight</code>
</h1></div>
<p>The package <code>bartik.weight</code> is an implementation in R for estimating Rotemberg weights outlined in <a href="http://paulgp.github.io/papers/bartik_gpss.pdf">Goldsmith-Pinkham, Sorkin and Swift (2018)</a>.</p>
<p>The original Stata package by Paul Goldsmith-Pinkham can be found here: <a href="https://github.com/paulgp/bartik-weight" class="uri">https://github.com/paulgp/bartik-weight</a>.</p>
</div>
<div id="installation" class="section level1">
<h1 class="hasAnchor">
<a href="#installation" class="anchor"></a>Installation</h1>
<p>You can install the released version of bartik.weight from Github with:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" data-line-number="1"><span class="co"># install.packages("devtools")</span></a>
<a class="sourceLine" id="cb1-2" data-line-number="2">devtools<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/devtools/topics/install_github">install_github</a></span>(<span class="st">"jjchern/bartik.weight"</span>)</a>
<a class="sourceLine" id="cb1-3" data-line-number="3"></a>
<a class="sourceLine" id="cb1-4" data-line-number="4"><span class="co"># To uninstall the package, use:</span></a>
<a class="sourceLine" id="cb1-5" data-line-number="5"><span class="co"># remove.packages("bartik.weight")</span></a></code></pre></div>
</div>
<div id="examples" class="section level1">
<h1 class="hasAnchor">
<a href="#examples" class="anchor"></a>Examples</h1>
<p>The package includes example datasets:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" data-line-number="1"><span class="kw">library</span>(tidyverse)</a>
<a class="sourceLine" id="cb2-2" data-line-number="2"><span class="co">#&gt; ── Attaching packages ──────────────────────────────────────────────────────────── tidyverse 1.2.1 ──</span></a>
<a class="sourceLine" id="cb2-3" data-line-number="3"><span class="co">#&gt; ✔ ggplot2 2.2.1.9000     ✔ purrr   0.2.4     </span></a>
<a class="sourceLine" id="cb2-4" data-line-number="4"><span class="co">#&gt; ✔ tibble  1.4.2          ✔ dplyr   0.7.4     </span></a>
<a class="sourceLine" id="cb2-5" data-line-number="5"><span class="co">#&gt; ✔ tidyr   0.8.0          ✔ stringr 1.3.0     </span></a>
<a class="sourceLine" id="cb2-6" data-line-number="6"><span class="co">#&gt; ✔ readr   1.1.1.9000     ✔ forcats 0.3.0</span></a>
<a class="sourceLine" id="cb2-7" data-line-number="7"><span class="co">#&gt; ── Conflicts ─────────────────────────────────────────────────────────────── tidyverse_conflicts() ──</span></a>
<a class="sourceLine" id="cb2-8" data-line-number="8"><span class="co">#&gt; ✖ dplyr::filter() masks stats::filter()</span></a>
<a class="sourceLine" id="cb2-9" data-line-number="9"><span class="co">#&gt; ✖ dplyr::lag()    masks stats::lag()</span></a>
<a class="sourceLine" id="cb2-10" data-line-number="10"></a>
<a class="sourceLine" id="cb2-11" data-line-number="11"><span class="co"># index: czone, year</span></a>
<a class="sourceLine" id="cb2-12" data-line-number="12">bartik.weight<span class="op">::</span>ADH_master</a>
<a class="sourceLine" id="cb2-13" data-line-number="13"><span class="co">#&gt; # A tibble: 1,444 x 20</span></a>
<a class="sourceLine" id="cb2-14" data-line-number="14"><span class="co">#&gt;    czone  year d_sh_empl_mfg d_tradeusch_pw timepwt48 reg_midatl reg_encen</span></a>
<a class="sourceLine" id="cb2-15" data-line-number="15"><span class="co">#&gt;    &lt;dbl&gt; &lt;dbl&gt;         &lt;dbl&gt;          &lt;dbl&gt;     &lt;dbl&gt;      &lt;dbl&gt;     &lt;dbl&gt;</span></a>
<a class="sourceLine" id="cb2-16" data-line-number="16"><span class="co">#&gt;  1  100. 1990.        -3.81            5.29  0.00211          0.        0.</span></a>
<a class="sourceLine" id="cb2-17" data-line-number="17"><span class="co">#&gt;  2  100. 2000.        -4.62            6.62  0.00207          0.        0.</span></a>
<a class="sourceLine" id="cb2-18" data-line-number="18"><span class="co">#&gt;  3  200. 1990.        -0.681           3.03  0.000732         0.        0.</span></a>
<a class="sourceLine" id="cb2-19" data-line-number="19"><span class="co">#&gt;  4  200. 2000.        -6.97           10.3   0.000815         0.        0.</span></a>
<a class="sourceLine" id="cb2-20" data-line-number="20"><span class="co">#&gt;  5  301. 1990.        -2.17            2.06  0.000261         0.        0.</span></a>
<a class="sourceLine" id="cb2-21" data-line-number="21"><span class="co">#&gt;  6  301. 2000.        -3.78            6.20  0.000240         0.        0.</span></a>
<a class="sourceLine" id="cb2-22" data-line-number="22"><span class="co">#&gt;  7  302. 1990.        -2.83            1.08  0.00257          0.        0.</span></a>
<a class="sourceLine" id="cb2-23" data-line-number="23"><span class="co">#&gt;  8  302. 2000.        -3.95            3.11  0.00260          0.        0.</span></a>
<a class="sourceLine" id="cb2-24" data-line-number="24"><span class="co">#&gt;  9  401. 1990.        -5.04            1.02  0.00171          0.        0.</span></a>
<a class="sourceLine" id="cb2-25" data-line-number="25"><span class="co">#&gt; 10  401. 2000.        -4.96            2.99  0.00176          0.        0.</span></a>
<a class="sourceLine" id="cb2-26" data-line-number="26"><span class="co">#&gt; # ... with 1,434 more rows, and 13 more variables: reg_wncen &lt;dbl&gt;,</span></a>
<a class="sourceLine" id="cb2-27" data-line-number="27"><span class="co">#&gt; #   reg_satl &lt;dbl&gt;, reg_escen &lt;dbl&gt;, reg_wscen &lt;dbl&gt;, reg_mount &lt;dbl&gt;,</span></a>
<a class="sourceLine" id="cb2-28" data-line-number="28"><span class="co">#&gt; #   reg_pacif &lt;dbl&gt;, l_sh_popedu_c &lt;dbl&gt;, l_sh_popfborn &lt;dbl&gt;,</span></a>
<a class="sourceLine" id="cb2-29" data-line-number="29"><span class="co">#&gt; #   l_sh_empl_f &lt;dbl&gt;, l_sh_routine33 &lt;dbl&gt;, l_task_outsource &lt;dbl&gt;,</span></a>
<a class="sourceLine" id="cb2-30" data-line-number="30"><span class="co">#&gt; #   t2 &lt;dbl&gt;, l_shind_manuf_cbp &lt;dbl&gt;</span></a>
<a class="sourceLine" id="cb2-31" data-line-number="31"></a>
<a class="sourceLine" id="cb2-32" data-line-number="32"><span class="co"># index: czone, year, ind</span></a>
<a class="sourceLine" id="cb2-33" data-line-number="33">bartik.weight<span class="op">::</span>ADH_local</a>
<a class="sourceLine" id="cb2-34" data-line-number="34"><span class="co">#&gt; # A tibble: 563,160 x 4</span></a>
<a class="sourceLine" id="cb2-35" data-line-number="35"><span class="co">#&gt;    czone  year ind    sh_ind_</span></a>
<a class="sourceLine" id="cb2-36" data-line-number="36"><span class="co">#&gt;    &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt;    &lt;dbl&gt;</span></a>
<a class="sourceLine" id="cb2-37" data-line-number="37"><span class="co">#&gt;  1  100. 1990. 2011  0.0101  </span></a>
<a class="sourceLine" id="cb2-38" data-line-number="38"><span class="co">#&gt;  2  100. 1990. 2015  0.      </span></a>
<a class="sourceLine" id="cb2-39" data-line-number="39"><span class="co">#&gt;  3  100. 1990. 2022  0.000433</span></a>
<a class="sourceLine" id="cb2-40" data-line-number="40"><span class="co">#&gt;  4  100. 1990. 2023  0.00209 </span></a>
<a class="sourceLine" id="cb2-41" data-line-number="41"><span class="co">#&gt;  5  100. 1990. 2024  0.000991</span></a>
<a class="sourceLine" id="cb2-42" data-line-number="42"><span class="co">#&gt;  6  100. 1990. 2026  0.00401 </span></a>
<a class="sourceLine" id="cb2-43" data-line-number="43"><span class="co">#&gt;  7  100. 1990. 2032  0.      </span></a>
<a class="sourceLine" id="cb2-44" data-line-number="44"><span class="co">#&gt;  8  100. 1990. 2033  0.000499</span></a>
<a class="sourceLine" id="cb2-45" data-line-number="45"><span class="co">#&gt;  9  100. 1990. 2034  0.      </span></a>
<a class="sourceLine" id="cb2-46" data-line-number="46"><span class="co">#&gt; 10  100. 1990. 2035  0.000340</span></a>
<a class="sourceLine" id="cb2-47" data-line-number="47"><span class="co">#&gt; # ... with 563,150 more rows</span></a>
<a class="sourceLine" id="cb2-48" data-line-number="48"></a>
<a class="sourceLine" id="cb2-49" data-line-number="49"><span class="co"># index: year, ind</span></a>
<a class="sourceLine" id="cb2-50" data-line-number="50">bartik.weight<span class="op">::</span>ADH_global</a>
<a class="sourceLine" id="cb2-51" data-line-number="51"><span class="co">#&gt; # A tibble: 780 x 3</span></a>
<a class="sourceLine" id="cb2-52" data-line-number="52"><span class="co">#&gt;     year ind     trade_</span></a>
<a class="sourceLine" id="cb2-53" data-line-number="53"><span class="co">#&gt;    &lt;dbl&gt; &lt;chr&gt;    &lt;dbl&gt;</span></a>
<a class="sourceLine" id="cb2-54" data-line-number="54"><span class="co">#&gt;  1 1990. 2011   1.21   </span></a>
<a class="sourceLine" id="cb2-55" data-line-number="55"><span class="co">#&gt;  2 1990. 2015   7.46   </span></a>
<a class="sourceLine" id="cb2-56" data-line-number="56"><span class="co">#&gt;  3 1990. 2022   0.00698</span></a>
<a class="sourceLine" id="cb2-57" data-line-number="57"><span class="co">#&gt;  4 1990. 2023   3.16   </span></a>
<a class="sourceLine" id="cb2-58" data-line-number="58"><span class="co">#&gt;  5 1990. 2024   0.     </span></a>
<a class="sourceLine" id="cb2-59" data-line-number="59"><span class="co">#&gt;  6 1990. 2026   0.0333 </span></a>
<a class="sourceLine" id="cb2-60" data-line-number="60"><span class="co">#&gt;  7 1990. 2032   0.176  </span></a>
<a class="sourceLine" id="cb2-61" data-line-number="61"><span class="co">#&gt;  8 1990. 2033   3.78   </span></a>
<a class="sourceLine" id="cb2-62" data-line-number="62"><span class="co">#&gt;  9 1990. 2034  12.2    </span></a>
<a class="sourceLine" id="cb2-63" data-line-number="63"><span class="co">#&gt; 10 1990. 2035   5.11   </span></a>
<a class="sourceLine" id="cb2-64" data-line-number="64"><span class="co">#&gt; # ... with 770 more rows</span></a></code></pre></div>
<p>The main dataset <code><a href="http://www.rdocumentation.org/packages/bartik.weight/topics/ADH_master">bartik.weight::ADH_master</a></code> contains the key variables at the level of czone-year.</p>
<p>The Bartik instrument is formed by interacting local industry shares (variable <code>sh_ind_</code> in the <code>ADH_local</code> tibble) and the industry growth rates (variable <code>trade_</code> in the <code>ADH_global</code> tibble).</p>
<p>To estimate the Rotemberg weights, it’s necessary to transform the <code>local</code> tibble from long to wide format:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" data-line-number="1">bartik.weight<span class="op">::</span>ADH_local <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb3-2" data-line-number="2"><span class="st">    </span><span class="kw">mutate</span>(<span class="dt">ind =</span> <span class="kw">str_glue</span>(<span class="st">"t{year}_sh_ind_{ind}"</span>)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb3-3" data-line-number="3"><span class="st">    </span><span class="kw">spread</span>(ind, sh_ind_, <span class="dt">fill =</span> <span class="dv">0</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb3-4" data-line-number="4"><span class="st">    </span><span class="kw">print</span>() -&gt;<span class="st"> </span>ADH_local2</a>
<a class="sourceLine" id="cb3-5" data-line-number="5"><span class="co">#&gt; # A tibble: 1,444 x 782</span></a>
<a class="sourceLine" id="cb3-6" data-line-number="6"><span class="co">#&gt;    czone  year t1990_sh_ind_2011 t1990_sh_ind_2015 t1990_sh_ind_2022</span></a>
<a class="sourceLine" id="cb3-7" data-line-number="7"><span class="co">#&gt;    &lt;dbl&gt; &lt;dbl&gt;             &lt;dbl&gt;             &lt;dbl&gt;             &lt;dbl&gt;</span></a>
<a class="sourceLine" id="cb3-8" data-line-number="8"><span class="co">#&gt;  1  100. 1990.          0.0101             0.               0.000433</span></a>
<a class="sourceLine" id="cb3-9" data-line-number="9"><span class="co">#&gt;  2  100. 2000.          0.                 0.               0.      </span></a>
<a class="sourceLine" id="cb3-10" data-line-number="10"><span class="co">#&gt;  3  200. 1990.          0.00165            0.00714          0.      </span></a>
<a class="sourceLine" id="cb3-11" data-line-number="11"><span class="co">#&gt;  4  200. 2000.          0.                 0.               0.      </span></a>
<a class="sourceLine" id="cb3-12" data-line-number="12"><span class="co">#&gt;  5  301. 1990.          0.000581           0.               0.      </span></a>
<a class="sourceLine" id="cb3-13" data-line-number="13"><span class="co">#&gt;  6  301. 2000.          0.                 0.               0.      </span></a>
<a class="sourceLine" id="cb3-14" data-line-number="14"><span class="co">#&gt;  7  302. 1990.          0.0215             0.00341          0.      </span></a>
<a class="sourceLine" id="cb3-15" data-line-number="15"><span class="co">#&gt;  8  302. 2000.          0.                 0.               0.      </span></a>
<a class="sourceLine" id="cb3-16" data-line-number="16"><span class="co">#&gt;  9  401. 1990.          0.000242           0.00274          0.      </span></a>
<a class="sourceLine" id="cb3-17" data-line-number="17"><span class="co">#&gt; 10  401. 2000.          0.                 0.               0.      </span></a>
<a class="sourceLine" id="cb3-18" data-line-number="18"><span class="co">#&gt; # ... with 1,434 more rows, and 777 more variables:</span></a>
<a class="sourceLine" id="cb3-19" data-line-number="19"><span class="co">#&gt; #   t1990_sh_ind_2023 &lt;dbl&gt;, t1990_sh_ind_2024 &lt;dbl&gt;,</span></a>
<a class="sourceLine" id="cb3-20" data-line-number="20"><span class="co">#&gt; #   t1990_sh_ind_2026 &lt;dbl&gt;, t1990_sh_ind_2032 &lt;dbl&gt;,</span></a>
<a class="sourceLine" id="cb3-21" data-line-number="21"><span class="co">#&gt; #   t1990_sh_ind_2033 &lt;dbl&gt;, t1990_sh_ind_2034 &lt;dbl&gt;,</span></a>
<a class="sourceLine" id="cb3-22" data-line-number="22"><span class="co">#&gt; #   t1990_sh_ind_2035 &lt;dbl&gt;, t1990_sh_ind_2037 &lt;dbl&gt;,</span></a>
<a class="sourceLine" id="cb3-23" data-line-number="23"><span class="co">#&gt; #   t1990_sh_ind_2041 &lt;dbl&gt;, t1990_sh_ind_2043 &lt;dbl&gt;,</span></a>
<a class="sourceLine" id="cb3-24" data-line-number="24"><span class="co">#&gt; #   t1990_sh_ind_2044 &lt;dbl&gt;, t1990_sh_ind_2045 &lt;dbl&gt;,</span></a>
<a class="sourceLine" id="cb3-25" data-line-number="25"><span class="co">#&gt; #   t1990_sh_ind_2046 &lt;dbl&gt;, t1990_sh_ind_2047 &lt;dbl&gt;,</span></a>
<a class="sourceLine" id="cb3-26" data-line-number="26"><span class="co">#&gt; #   t1990_sh_ind_2048 &lt;dbl&gt;, t1990_sh_ind_2051 &lt;dbl&gt;,</span></a>
<a class="sourceLine" id="cb3-27" data-line-number="27"><span class="co">#&gt; #   t1990_sh_ind_2062 &lt;dbl&gt;, t1990_sh_ind_2064 &lt;dbl&gt;,</span></a>
<a class="sourceLine" id="cb3-28" data-line-number="28"><span class="co">#&gt; #   t1990_sh_ind_2066 &lt;dbl&gt;, t1990_sh_ind_2067 &lt;dbl&gt;,</span></a>
<a class="sourceLine" id="cb3-29" data-line-number="29"><span class="co">#&gt; #   t1990_sh_ind_2068 &lt;dbl&gt;, t1990_sh_ind_2074 &lt;dbl&gt;,</span></a>
<a class="sourceLine" id="cb3-30" data-line-number="30"><span class="co">#&gt; #   t1990_sh_ind_2075 &lt;dbl&gt;, t1990_sh_ind_2076 &lt;dbl&gt;,</span></a>
<a class="sourceLine" id="cb3-31" data-line-number="31"><span class="co">#&gt; #   t1990_sh_ind_2077 &lt;dbl&gt;, t1990_sh_ind_2079 &lt;dbl&gt;,</span></a>
<a class="sourceLine" id="cb3-32" data-line-number="32"><span class="co">#&gt; #   t1990_sh_ind_2082 &lt;dbl&gt;, t1990_sh_ind_2083 &lt;dbl&gt;,</span></a>
<a class="sourceLine" id="cb3-33" data-line-number="33"><span class="co">#&gt; #   t1990_sh_ind_2084 &lt;dbl&gt;, t1990_sh_ind_2085 &lt;dbl&gt;,</span></a>
<a class="sourceLine" id="cb3-34" data-line-number="34"><span class="co">#&gt; #   t1990_sh_ind_2086 &lt;dbl&gt;, t1990_sh_ind_2087 &lt;dbl&gt;,</span></a>
<a class="sourceLine" id="cb3-35" data-line-number="35"><span class="co">#&gt; #   t1990_sh_ind_2091 &lt;dbl&gt;, t1990_sh_ind_2095 &lt;dbl&gt;,</span></a>
<a class="sourceLine" id="cb3-36" data-line-number="36"><span class="co">#&gt; #   t1990_sh_ind_2096 &lt;dbl&gt;, t1990_sh_ind_2097 &lt;dbl&gt;,</span></a>
<a class="sourceLine" id="cb3-37" data-line-number="37"><span class="co">#&gt; #   t1990_sh_ind_2098 &lt;dbl&gt;, t1990_sh_ind_2099 &lt;dbl&gt;,</span></a>
<a class="sourceLine" id="cb3-38" data-line-number="38"><span class="co">#&gt; #   t1990_sh_ind_2111 &lt;dbl&gt;, t1990_sh_ind_2131 &lt;dbl&gt;,</span></a>
<a class="sourceLine" id="cb3-39" data-line-number="39"><span class="co">#&gt; #   t1990_sh_ind_2211 &lt;dbl&gt;, t1990_sh_ind_2221 &lt;dbl&gt;,</span></a>
<a class="sourceLine" id="cb3-40" data-line-number="40"><span class="co">#&gt; #   t1990_sh_ind_2231 &lt;dbl&gt;, t1990_sh_ind_2241 &lt;dbl&gt;,</span></a>
<a class="sourceLine" id="cb3-41" data-line-number="41"><span class="co">#&gt; #   t1990_sh_ind_2252 &lt;dbl&gt;, t1990_sh_ind_2253 &lt;dbl&gt;,</span></a>
<a class="sourceLine" id="cb3-42" data-line-number="42"><span class="co">#&gt; #   t1990_sh_ind_2257 &lt;dbl&gt;, t1990_sh_ind_2258 &lt;dbl&gt;,</span></a>
<a class="sourceLine" id="cb3-43" data-line-number="43"><span class="co">#&gt; #   t1990_sh_ind_2273 &lt;dbl&gt;, t1990_sh_ind_2281 &lt;dbl&gt;,</span></a>
<a class="sourceLine" id="cb3-44" data-line-number="44"><span class="co">#&gt; #   t1990_sh_ind_2284 &lt;dbl&gt;, t1990_sh_ind_2295 &lt;dbl&gt;,</span></a>
<a class="sourceLine" id="cb3-45" data-line-number="45"><span class="co">#&gt; #   t1990_sh_ind_2296 &lt;dbl&gt;, t1990_sh_ind_2297 &lt;dbl&gt;,</span></a>
<a class="sourceLine" id="cb3-46" data-line-number="46"><span class="co">#&gt; #   t1990_sh_ind_2298 &lt;dbl&gt;, t1990_sh_ind_2299 &lt;dbl&gt;,</span></a>
<a class="sourceLine" id="cb3-47" data-line-number="47"><span class="co">#&gt; #   t1990_sh_ind_2311 &lt;dbl&gt;, t1990_sh_ind_2321 &lt;dbl&gt;,</span></a>
<a class="sourceLine" id="cb3-48" data-line-number="48"><span class="co">#&gt; #   t1990_sh_ind_2322 &lt;dbl&gt;, t1990_sh_ind_2323 &lt;dbl&gt;,</span></a>
<a class="sourceLine" id="cb3-49" data-line-number="49"><span class="co">#&gt; #   t1990_sh_ind_2325 &lt;dbl&gt;, t1990_sh_ind_2329 &lt;dbl&gt;,</span></a>
<a class="sourceLine" id="cb3-50" data-line-number="50"><span class="co">#&gt; #   t1990_sh_ind_2331 &lt;dbl&gt;, t1990_sh_ind_2335 &lt;dbl&gt;,</span></a>
<a class="sourceLine" id="cb3-51" data-line-number="51"><span class="co">#&gt; #   t1990_sh_ind_2337 &lt;dbl&gt;, t1990_sh_ind_2339 &lt;dbl&gt;,</span></a>
<a class="sourceLine" id="cb3-52" data-line-number="52"><span class="co">#&gt; #   t1990_sh_ind_2341 &lt;dbl&gt;, t1990_sh_ind_2342 &lt;dbl&gt;,</span></a>
<a class="sourceLine" id="cb3-53" data-line-number="53"><span class="co">#&gt; #   t1990_sh_ind_2353 &lt;dbl&gt;, t1990_sh_ind_2369 &lt;dbl&gt;,</span></a>
<a class="sourceLine" id="cb3-54" data-line-number="54"><span class="co">#&gt; #   t1990_sh_ind_2371 &lt;dbl&gt;, t1990_sh_ind_2381 &lt;dbl&gt;,</span></a>
<a class="sourceLine" id="cb3-55" data-line-number="55"><span class="co">#&gt; #   t1990_sh_ind_2384 &lt;dbl&gt;, t1990_sh_ind_2385 &lt;dbl&gt;,</span></a>
<a class="sourceLine" id="cb3-56" data-line-number="56"><span class="co">#&gt; #   t1990_sh_ind_2386 &lt;dbl&gt;, t1990_sh_ind_2389 &lt;dbl&gt;,</span></a>
<a class="sourceLine" id="cb3-57" data-line-number="57"><span class="co">#&gt; #   t1990_sh_ind_2391 &lt;dbl&gt;, t1990_sh_ind_2392 &lt;dbl&gt;,</span></a>
<a class="sourceLine" id="cb3-58" data-line-number="58"><span class="co">#&gt; #   t1990_sh_ind_2393 &lt;dbl&gt;, t1990_sh_ind_2394 &lt;dbl&gt;,</span></a>
<a class="sourceLine" id="cb3-59" data-line-number="59"><span class="co">#&gt; #   t1990_sh_ind_2395 &lt;dbl&gt;, t1990_sh_ind_2396 &lt;dbl&gt;,</span></a>
<a class="sourceLine" id="cb3-60" data-line-number="60"><span class="co">#&gt; #   t1990_sh_ind_2399 &lt;dbl&gt;, t1990_sh_ind_2411 &lt;dbl&gt;,</span></a>
<a class="sourceLine" id="cb3-61" data-line-number="61"><span class="co">#&gt; #   t1990_sh_ind_2421 &lt;dbl&gt;, t1990_sh_ind_2426 &lt;dbl&gt;,</span></a>
<a class="sourceLine" id="cb3-62" data-line-number="62"><span class="co">#&gt; #   t1990_sh_ind_2429 &lt;dbl&gt;, t1990_sh_ind_2431 &lt;dbl&gt;,</span></a>
<a class="sourceLine" id="cb3-63" data-line-number="63"><span class="co">#&gt; #   t1990_sh_ind_2434 &lt;dbl&gt;, t1990_sh_ind_2435 &lt;dbl&gt;,</span></a>
<a class="sourceLine" id="cb3-64" data-line-number="64"><span class="co">#&gt; #   t1990_sh_ind_2436 &lt;dbl&gt;, t1990_sh_ind_2439 &lt;dbl&gt;,</span></a>
<a class="sourceLine" id="cb3-65" data-line-number="65"><span class="co">#&gt; #   t1990_sh_ind_2448 &lt;dbl&gt;, t1990_sh_ind_2449 &lt;dbl&gt;,</span></a>
<a class="sourceLine" id="cb3-66" data-line-number="66"><span class="co">#&gt; #   t1990_sh_ind_2451 &lt;dbl&gt;, t1990_sh_ind_2452 &lt;dbl&gt;,</span></a>
<a class="sourceLine" id="cb3-67" data-line-number="67"><span class="co">#&gt; #   t1990_sh_ind_2491 &lt;dbl&gt;, t1990_sh_ind_2493 &lt;dbl&gt;,</span></a>
<a class="sourceLine" id="cb3-68" data-line-number="68"><span class="co">#&gt; #   t1990_sh_ind_2499 &lt;dbl&gt;, t1990_sh_ind_2514 &lt;dbl&gt;, …</span></a></code></pre></div>
<p>Once all the data is in proper format, the <code><a href="reference/bw.html">bw()</a></code> function will return the weight, and the just-identified IV estimates:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" data-line-number="1"><span class="kw">library</span>(bartik.weight)</a>
<a class="sourceLine" id="cb4-2" data-line-number="2"></a>
<a class="sourceLine" id="cb4-3" data-line-number="3"><span class="co"># Prepare variables in the master tibble</span></a>
<a class="sourceLine" id="cb4-4" data-line-number="4">y =<span class="st"> "d_sh_empl_mfg"</span></a>
<a class="sourceLine" id="cb4-5" data-line-number="5">x =<span class="st"> "d_tradeusch_pw"</span></a>
<a class="sourceLine" id="cb4-6" data-line-number="6">controls =<span class="st"> </span><span class="kw">c</span>(<span class="st">"reg_midatl"</span>, <span class="st">"reg_encen"</span>, <span class="st">"reg_wncen"</span>, <span class="st">"reg_satl"</span>,</a>
<a class="sourceLine" id="cb4-7" data-line-number="7">  <span class="st">"reg_escen"</span>, <span class="st">"reg_wscen"</span>, <span class="st">"reg_mount"</span>, <span class="st">"reg_pacif"</span>, <span class="st">"l_sh_popedu_c"</span>,</a>
<a class="sourceLine" id="cb4-8" data-line-number="8">  <span class="st">"l_sh_popfborn"</span>, <span class="st">"l_sh_empl_f"</span>, <span class="st">"l_sh_routine33"</span>, <span class="st">"l_task_outsource"</span>,</a>
<a class="sourceLine" id="cb4-9" data-line-number="9">  <span class="st">"t2"</span>, <span class="st">"l_shind_manuf_cbp"</span>)</a>
<a class="sourceLine" id="cb4-10" data-line-number="10">weight =<span class="st"> "timepwt48"</span></a>
<a class="sourceLine" id="cb4-11" data-line-number="11"></a>
<a class="sourceLine" id="cb4-12" data-line-number="12"><span class="co"># Prepare variables in the local tibble</span></a>
<a class="sourceLine" id="cb4-13" data-line-number="13">Z =<span class="st"> </span><span class="kw">setdiff</span>(<span class="kw">names</span>(ADH_local_wide), <span class="kw">c</span>(<span class="st">"czone"</span>, <span class="st">"year"</span>))</a>
<a class="sourceLine" id="cb4-14" data-line-number="14"></a>
<a class="sourceLine" id="cb4-15" data-line-number="15"><span class="co"># Prepare variables in the global tibble</span></a>
<a class="sourceLine" id="cb4-16" data-line-number="16">G =<span class="st"> "trade_"</span></a>
<a class="sourceLine" id="cb4-17" data-line-number="17"></a>
<a class="sourceLine" id="cb4-18" data-line-number="18"><span class="co"># Estimate the weight (alpha) and the IV estimates (beta)</span></a>
<a class="sourceLine" id="cb4-19" data-line-number="19">bw =<span class="st"> </span><span class="kw"><a href="reference/bw.html">bw</a></span>(ADH_master, y, x, controls, weight, ADH_local2, Z, ADH_global, G)</a>
<a class="sourceLine" id="cb4-20" data-line-number="20">bw</a>
<a class="sourceLine" id="cb4-21" data-line-number="21"><span class="co">#&gt; # A tibble: 780 x 5</span></a>
<a class="sourceLine" id="cb4-22" data-line-number="22"><span class="co">#&gt;     year ind     trade_        alpha     beta</span></a>
<a class="sourceLine" id="cb4-23" data-line-number="23"><span class="co">#&gt;    &lt;dbl&gt; &lt;chr&gt;    &lt;dbl&gt;        &lt;dbl&gt;    &lt;dbl&gt;</span></a>
<a class="sourceLine" id="cb4-24" data-line-number="24"><span class="co">#&gt;  1 1990. 2011   1.21    -0.00102      -2.80  </span></a>
<a class="sourceLine" id="cb4-25" data-line-number="25"><span class="co">#&gt;  2 1990. 2015   7.46    -0.0104       -1.06  </span></a>
<a class="sourceLine" id="cb4-26" data-line-number="26"><span class="co">#&gt;  3 1990. 2022   0.00698  0.000000663   7.74  </span></a>
<a class="sourceLine" id="cb4-27" data-line-number="27"><span class="co">#&gt;  4 1990. 2023   3.16     0.0000676     8.82  </span></a>
<a class="sourceLine" id="cb4-28" data-line-number="28"><span class="co">#&gt;  5 1990. 2024   0.       0.            3.93  </span></a>
<a class="sourceLine" id="cb4-29" data-line-number="29"><span class="co">#&gt;  6 1990. 2026   0.0333   0.0000218    -0.0432</span></a>
<a class="sourceLine" id="cb4-30" data-line-number="30"><span class="co">#&gt;  7 1990. 2032   0.176    0.00000474   13.6   </span></a>
<a class="sourceLine" id="cb4-31" data-line-number="31"><span class="co">#&gt;  8 1990. 2033   3.78     0.0000286    29.0   </span></a>
<a class="sourceLine" id="cb4-32" data-line-number="32"><span class="co">#&gt;  9 1990. 2034  12.2     -0.00188       0.923 </span></a>
<a class="sourceLine" id="cb4-33" data-line-number="33"><span class="co">#&gt; 10 1990. 2035   5.11    -0.000357      1.59  </span></a>
<a class="sourceLine" id="cb4-34" data-line-number="34"><span class="co">#&gt; # ... with 770 more rows</span></a></code></pre></div>
<p>The following table replicates Panel A of Table 5 in <a href="http://paulgp.github.io/papers/bartik_gpss.pdf">Goldsmith-Pinkham, Sorkin and Swift (2018)</a>:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" data-line-number="1">bw <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb5-2" data-line-number="2"><span class="st">    </span><span class="kw">mutate</span>(<span class="dt">Weight =</span> <span class="kw">if_else</span>(alpha <span class="op">&gt;</span><span class="st"> </span><span class="dv">0</span>, <span class="st">"Positive"</span>, <span class="st">"Negative"</span>)) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb5-3" data-line-number="3"><span class="st">    </span><span class="kw">group_by</span>(Weight) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb5-4" data-line-number="4"><span class="st">    </span><span class="kw">summarise</span>(<span class="dt">Sum =</span> <span class="kw">sum</span>(alpha), <span class="dt">Mean =</span> <span class="kw">mean</span>(alpha)) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb5-5" data-line-number="5"><span class="st">    </span>knitr<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/knitr/topics/kable">kable</a></span>(<span class="dt">digits =</span> <span class="dv">3</span>, <span class="dt">caption =</span> <span class="st">"Negative and positive weights"</span>)</a></code></pre></div>
<table class="table">
<caption>Negative and positive weights</caption>
<thead><tr class="header">
<th align="left">Weight</th>
<th align="right">Sum</th>
<th align="right">Mean</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">Negative</td>
<td align="right">-0.116</td>
<td align="right">0.000</td>
</tr>
<tr class="even">
<td align="left">Positive</td>
<td align="right">1.116</td>
<td align="right">0.002</td>
</tr>
</tbody>
</table>
<p>Below is part of Panel D of Table 5:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb6-1" data-line-number="1">bw <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb6-2" data-line-number="2"><span class="st">    </span><span class="kw">top_n</span>(<span class="dv">5</span>, alpha) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb6-3" data-line-number="3"><span class="st">    </span><span class="kw">arrange</span>(<span class="kw">desc</span>(alpha)) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb6-4" data-line-number="4"><span class="st">    </span><span class="kw">mutate</span>(<span class="dt">ind =</span> <span class="kw">case_when</span>(</a>
<a class="sourceLine" id="cb6-5" data-line-number="5">        ind <span class="op">==</span><span class="st"> "3571"</span> <span class="op">~</span><span class="st"> "Electronic Computers"</span>,</a>
<a class="sourceLine" id="cb6-6" data-line-number="6">        ind <span class="op">==</span><span class="st"> "3944"</span> <span class="op">~</span><span class="st"> "Games and Toys"</span>,</a>
<a class="sourceLine" id="cb6-7" data-line-number="7">        ind <span class="op">==</span><span class="st"> "3651"</span> <span class="op">~</span><span class="st"> "Household Audio and Video"</span>,</a>
<a class="sourceLine" id="cb6-8" data-line-number="8">        ind <span class="op">==</span><span class="st"> "3661"</span> <span class="op">~</span><span class="st"> "Telephone Apparatus"</span>,</a>
<a class="sourceLine" id="cb6-9" data-line-number="9">        ind <span class="op">==</span><span class="st"> "3577"</span> <span class="op">~</span><span class="st"> "Computer Equipment"</span></a>
<a class="sourceLine" id="cb6-10" data-line-number="10">    )) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb6-11" data-line-number="11"><span class="st">    </span><span class="kw">rename</span>(<span class="dt">g =</span> trade_) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb6-12" data-line-number="12"><span class="st">    </span>knitr<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/knitr/topics/kable">kable</a></span>(<span class="dt">digits =</span> <span class="dv">3</span>, <span class="dt">caption =</span> <span class="st">"Top five Rotemberg weight industries"</span>)</a></code></pre></div>
<table class="table">
<caption>Top five Rotemberg weight industries</caption>
<thead><tr class="header">
<th align="right">year</th>
<th align="left">ind</th>
<th align="right">g</th>
<th align="right">alpha</th>
<th align="right">beta</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="right">2000</td>
<td align="left">Electronic Computers</td>
<td align="right">189.117</td>
<td align="right">0.140</td>
<td align="right">-0.620</td>
</tr>
<tr class="even">
<td align="right">2000</td>
<td align="left">Games and Toys</td>
<td align="right">320.636</td>
<td align="right">0.098</td>
<td align="right">-0.179</td>
</tr>
<tr class="odd">
<td align="right">2000</td>
<td align="left">Household Audio and Video</td>
<td align="right">218.216</td>
<td align="right">0.055</td>
<td align="right">-0.147</td>
</tr>
<tr class="even">
<td align="right">2000</td>
<td align="left">Telephone Apparatus</td>
<td align="right">94.577</td>
<td align="right">0.051</td>
<td align="right">-0.308</td>
</tr>
<tr class="odd">
<td align="right">2000</td>
<td align="left">Computer Equipment</td>
<td align="right">41.678</td>
<td align="right">0.047</td>
<td align="right">-0.232</td>
</tr>
</tbody>
</table>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2 class="hasAnchor">
<a href="#sidebar" class="anchor"></a>Links</h2>
<ul class="list-unstyled">
<li>Browse source code at <br><a href="https://github.com/jjchern/bartik.weight">https://​github.com/​jjchern/​bartik.weight</a>
</li>
<li>Report a bug at <br><a href="https://github.com/jjchern/bartik.weight/issues">https://​github.com/​jjchern/​bartik.weight/​issues</a>
</li>
</ul>
<h2>License</h2>
<p><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file <a href="LICENSE.html">LICENSE</a></p>
<h2>Developers</h2>
<ul class="list-unstyled">
<li>JJ Chen <br><small class="roles"> Author, maintainer </small> </li>
</ul>
</div>

</div>


      <footer><div class="copyright">
  <p>Developed by JJ Chen.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://hadley.github.io/pkgdown/">pkgdown</a>.</p>
</div>

      </footer>
</div>

  </body>
</html>
